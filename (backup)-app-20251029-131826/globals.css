/* apps/web/app/globals.css */
@tailwind base;
@tailwind components;
@tailwind utilities;

/* ---------- Theme tokens (RGB) ---------- */
:root {
  --bg: 255 255 255;             /* page background */
  --surface: 246 248 252;        /* cards / panels */
  --text: 17 24 39;              /* primary text */
  --muted: 107 114 128;          /* secondary text */
  --border: 226 232 240;         /* hairline borders */
  --accent: 59 130 246;          /* brand-ish blue */
  --accent-contrast: 255 255 255;
  --ring: 59 130 246;
  --shadow: 0 10px 30px rgba(2, 6, 23, .08);
}

.dark {
  --bg: 2 6 23;                  /* slate-950-ish */
  --surface: 10 15 28;           /* deep card */
  --text: 241 245 249;
  --muted: 148 163 184;
  --border: 38 50 77;
  --accent: 99 102 241;          /* indigo-500 */
  --accent-contrast: 255 255 255;
  --ring: 165 180 252;
  --shadow: 0 10px 30px rgba(0, 0, 0, .35);
}

/* ---------- Base ---------- */
@layer base {
  html, body { @apply h-full; }

  body {
    background:
      radial-gradient(1200px 800px at 20% -10%, rgba(99,102,241,.08), transparent 60%),
      radial-gradient(1200px 800px at 80% 110%, rgba(14,165,233,.08), transparent 60%),
      rgb(var(--bg));
    color: rgb(var(--text));
  }

  ::selection { @apply bg-indigo-500 text-white; }
  a { @apply underline-offset-4 decoration-transparent hover:decoration-current transition; }
}

/* ---------- Components ---------- */
@layer components {
  /* Panels / cards */
  .card {
    @apply rounded-2xl border p-4 md:p-5;
    background: color-mix(in oklab, rgb(var(--surface)) 88%, transparent);
    border-color: rgb(var(--border) / .6);
    box-shadow: var(--shadow);
    backdrop-filter: saturate(120%) blur(8px);
  }

  /* Single, richer .glass (kept) */
  .glass {
    @apply rounded-2xl border;
    background: color-mix(in oklab, rgb(var(--surface)) 82%, transparent);
    border-color: rgb(var(--border) / .55);
    box-shadow: var(--shadow);
    backdrop-filter: saturate(120%) blur(10px);
  }

  /* Buttons */
  .btn {
    @apply inline-flex items-center justify-center gap-2 rounded-xl border px-3 py-2 text-sm font-medium transition;
    border-color: rgb(var(--border) / .6);
    background: color-mix(in oklab, rgb(var(--surface)) 88%, transparent);
  }
  .btn:hover { @apply -translate-y-px; }
  .btn:focus-visible { outline: none; box-shadow: 0 0 0 3px rgb(var(--ring) / .35); }

  .btn-primary {
    background: rgb(var(--accent));
    color: rgb(var(--accent-contrast));
    border-color: rgb(var(--accent));
  }
  .btn-primary:hover { filter: brightness(1.05); }

  .btn-ghost {
    background: transparent;
    border-color: rgb(var(--border) / .5);
  }

  /* Sidebar */
  .sidebar {
    @apply h-full rounded-2xl p-4 md:p-5 border;
    background:
      linear-gradient(180deg, rgb(var(--surface) / .9), rgb(var(--surface) / .7)),
      radial-gradient(800px 400px at 0% 0%, rgba(99,102,241,.10), transparent 60%);
    border-color: rgb(var(--border));
    backdrop-filter: blur(8px) saturate(120%);
  }
  .nav-item {
    @apply flex items-center justify-between gap-3 rounded-xl border px-3 py-2 text-sm;
    border-color: rgb(var(--border) / .7);
    background: color-mix(in oklab, rgb(var(--surface)) 92%, transparent);
  }
  .nav-item:hover { @apply translate-x-[2px]; }
  .nav-item-active {
    @apply border-transparent;
    background: color-mix(in oklab, rgb(var(--accent)) 16%, rgb(var(--surface)));
    color: rgb(var(--text));
  }

  /* ---------- Liquid / Glassy "Apple-style" helpers ---------- */
  .ui-glass {
    @apply rounded-2xl border;
    background:
      linear-gradient(180deg, rgb(var(--surface) / .65), rgb(var(--surface) / .35))
      , color-mix(in oklab, rgb(var(--surface)) 60%, transparent);
    border-color: rgb(var(--border) / .5);
    box-shadow: 0 8px 24px rgba(0,0,0,.08), inset 0 1px 0 rgba(255,255,255,.12);
    backdrop-filter: blur(16px) saturate(140%);
  }

  .ui-shine {
    position: relative;
    overflow: hidden;
  }
  .ui-shine::before {
    content: "";
    position: absolute; inset: 0;
    background:
      linear-gradient( to bottom,
        rgba(255,255,255,.35) 0%,
        rgba(255,255,255,.18) 40%,
        rgba(255,255,255,0) 60% );
    mix-blend-mode: screen;
    pointer-events: none;
  }

  .ui-liquid-icon {
    @apply inline-flex items-center justify-center;
    width: 44px; height: 44px; border-radius: 14px;
    border: 1px solid rgb(var(--border) / .5);
    background:
      radial-gradient(120% 120% at 10% 0%, rgba(255,255,255,.45), rgba(255,255,255,.08) 60%, transparent 70%),
      color-mix(in oklab, rgb(var(--surface)) 70%, transparent);
    backdrop-filter: blur(16px) saturate(140%);
    box-shadow:
      inset 0 1px 0 rgba(255,255,255,.22),
      0 8px 24px rgba(0,0,0,.10);
    transition: transform .2s ease, filter .2s ease;
  }
  .ui-liquid-icon:hover { transform: translateY(-1px); filter: brightness(1.06); }
  .ui-liquid-icon:active { transform: translateY(0); filter: brightness(.98); }
}

/* ---------- Utilities ---------- */
.line-clamp-1 { display: -webkit-box; -webkit-line-clamp: 1; -webkit-box-orient: vertical; overflow: hidden; }
.line-clamp-2 { display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }